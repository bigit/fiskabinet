<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <th:block th:replace="~{include::head}"/>
    <script th:src="@{/js/kkm.js}" type="text/javascript"></script>
    <script src="https://unpkg.com/htmx.org@1.9.2" integrity="sha384-L6OqL9pRWyyFU3+/bjdSri+iIphTN/bvYyM37tICVyOJkWZLpP2vGn6VUEXgzg6h" crossorigin="anonymous"></script>
    <title th:value="${title}"></title>
</head>
<body>
<div class="container vh-100">
    <form class="form" th:object="${kkm}" th:action="@{/kkm/save}" method="post">
        <input type="hidden" name="id" th:field="*{id}">
        <input type="hidden" id="modelId" th:field="*{modelId}">
        <!--        <input type="hidden" id="tpId" th:field="*{tradepointId}">-->
        <div class="row">
            <div class="col">
                <label for="inner_name">Внутреннее имя</label>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col">
                <input type="text" id="inner_name" name="innerName" th:field="*{innerName}">
            </div>
        </div>
        <div class="row mb-2">
            <div class="col">
                <input type="number" size="11" th:field="*{fnNumber}" value="" name="fnNum" placeholder="Номер ФН">
            </div>
        </div>
        <div class="row mb-2">
            <div class="col">
                <input type="date" th:field="*{fnEnd}">
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-3">
                <select id="vendor_list">
                    <option label="Выберите производителя"></option>
                    <option th:each="vendor : ${vendors.entrySet()}"
                            th:text="${vendor.getValue()}"
                            th:selected="${vendor ne null and vendor.getKey() eq kkm.vendorId}"
                            th:value="${vendor.getKey()}"></option>
                </select>
            </div>
            <div class="col-2">
                <div id="model_list" th:fragment="model_list">
                    <select id="model_select">
                        <option label="Выберите модель"></option>
                        <th:block th:if="${models ne null}">
                            <option th:each="model : ${models.entrySet()}"
                                    th:selected="${kkm ne null and model.key eq kkm.modelId}"
                                    th:text="${model.value}"
                                    th:value="${model.getKey()}"></option>
                        </th:block>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <select name="tp_select" id="tp_select" th:field="*{tradepointId}">
                    <option label="Выберите торговую точку" value="0"></option>
                    <option th:each="tradepoint: ${tradepoints.entrySet()}"
                            th:selected="${kkm ne null and tradepoint.key eq kkm.tradepointId}"
                            th:text="${tradepoint.value}"
                            th:value="${tradepoint.key}"></option>
                </select>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col">
                <input type="submit" class="btn btn-success" value="Сохранить">
                <a class="btn btn-warning" th:href="@{/home}">Назад</a>
            </div>
        </div>
    </form>
</div>
</body>
</html>